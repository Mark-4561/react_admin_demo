{"ast":null,"code":"import \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nvar _jsxFileName = \"D:\\\\Mark\\\\RA\\\\ws\\\\react-admin\\\\src\\\\components\\\\header\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport { withRouter } from 'react-router-dom';\nimport './index.less';\nimport LinkButton from '../link-button';\nimport menuList from '../../config/menuConfig';\nimport memoryUtils from '../../utils/memoryUtils';\nimport storageUtils from '../../utils/storageUtils';\nimport { formateDate } from \"../../utils/dateUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Header extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      cur: formateDate(Date.now())\n    };\n\n    this.logout = () => {\n      _Modal.confirm({\n        title: '提示：',\n        content: '确定退出吗?',\n        onOk: () => {\n          storageUtils.removeUser();\n          memoryUtils.user = {};\n          this.props.history.replace('/login');\n        }\n      });\n    };\n\n    this.getTime = () => {\n      this.intervalId = setInterval(() => {\n        const cur = formateDate(Date.now());\n        this.setState({\n          cur\n        });\n      }, 1000);\n    };\n\n    this.getTitle = () => {\n      const path = this.props.location.pathname;\n      let title;\n      menuList.forEach(item => {\n        if (item.key === path) {\n          title = item.title;\n        } else if (item.children) {\n          const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0);\n          if (cItem) title = cItem.title;\n        }\n      });\n      return title;\n    };\n  }\n\n  componentDidMount() {\n    this.getTime();\n  }\n\n  render() {\n    const username = memoryUtils.user.username;\n    const title = this.getTitle();\n    const {\n      cur\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-top\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u6B22\\u8FCE\\uFF0C \", username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(LinkButton, {\n          onClick: this.logout,\n          children: \"\\u9000\\u51FA\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-bottom-left\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-bottom-right\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: cur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Header);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/Mark/RA/ws/react-admin/src/components/header/index.jsx"],"names":["React","Component","withRouter","LinkButton","menuList","memoryUtils","storageUtils","formateDate","Header","state","cur","Date","now","logout","confirm","title","content","onOk","removeUser","user","props","history","replace","getTime","intervalId","setInterval","setState","getTitle","path","location","pathname","forEach","item","key","children","cItem","find","indexOf","componentDidMount","render","username"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Modal } from 'antd'\r\n\r\nimport './index.less'\r\nimport LinkButton from '../link-button'\r\nimport menuList from '../../config/menuConfig'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport storageUtils from '../../utils/storageUtils'\r\nimport { formateDate } from \"../../utils/dateUtils\"\r\n\r\nclass Header extends Component {\r\n\r\n    state = { cur: formateDate(Date.now()) }\r\n\r\n    logout = () => {\r\n        Modal.confirm({\r\n            title: '提示：',\r\n            content: '确定退出吗?',\r\n            onOk: () => {\r\n                storageUtils.removeUser()\r\n                memoryUtils.user = {}\r\n                this.props.history.replace('/login')\r\n            }\r\n        })\r\n    }\r\n\r\n    getTime = () => {\r\n        this.intervalId = setInterval(() => {\r\n            const cur = formateDate(Date.now())\r\n            this.setState({ cur })\r\n        }, 1000)\r\n    }\r\n\r\n    getTitle = () => {\r\n        const path = this.props.location.pathname\r\n        let title\r\n        menuList.forEach(item => {\r\n            if (item.key === path) {\r\n                title = item.title\r\n            }\r\n            else if (item.children) {\r\n                const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n                if (cItem)\r\n                    title = cItem.title\r\n            }\r\n        })\r\n        return title\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getTime()\r\n    }\r\n\r\n    render() {\r\n\r\n        const username = memoryUtils.user.username\r\n        const title = this.getTitle()\r\n        const { cur } = this.state\r\n\r\n        return (\r\n            <div className='header'>\r\n                <div className='header-top'>\r\n                    <span>欢迎， {username}</span>\r\n                    <LinkButton onClick={this.logout}>\r\n                        退出登录\r\n                    </LinkButton>\r\n                </div>\r\n                <div className=\"header-bottom\">\r\n                    <div className=\"header-bottom-left\">{title}</div>\r\n                    <div className=\"header-bottom-right\">\r\n                        <span>{cur}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Header)"]},"metadata":{},"sourceType":"module"}